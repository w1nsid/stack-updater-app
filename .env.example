# =============================================================================
# Stack Updater App - Environment Configuration
# =============================================================================
# Copy this file to .env and configure your settings.
# 
# REQUIRED: You MUST set PORTAINER_API_KEY for the app to work.
# =============================================================================

# -----------------------------------------------------------------------------
# Portainer Configuration (Required)
# -----------------------------------------------------------------------------
PORTAINER_URL=https://portainer.example.com

# REQUIRED - Generate from: Portainer > User Settings > Access Tokens
PORTAINER_API_KEY=ptr_xxxxxxxxxxxxxxxxxxxxxxxxx

# SSL Verification (set to false for self-signed certificates)
VERIFY_SSL=true

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Interval between background staleness checks (seconds)
REFRESH_INTERVAL=30

# Time after which a stack is considered outdated (seconds, default 24h)
OUTDATED_AFTER_SECONDS=86400

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# For Docker: DATABASE_URL is set automatically in docker-compose.yml
# For Local development: sqlite:///./app.db
DATABASE_URL=sqlite:///./app.db

# -----------------------------------------------------------------------------
# Cloudflare Access / Zero Trust (Optional)
# -----------------------------------------------------------------------------
# If Portainer is behind Cloudflare Access, provide service token credentials
CF_ACCESS_CLIENT_ID=
CF_ACCESS_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FILE=app.log
# Maximum size of each log file in bytes (default 1MB)
LOG_MAX_BYTES=1048576
# Number of backup log files to keep
LOG_BACKUP_COUNT=3

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Port to run the server on (used when running main.py directly)
PORT=8080

# -----------------------------------------------------------------------------
# Security Settings (Production)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed hosts (set to * to allow all)
# Example: ALLOWED_HOSTS=stack-updater.example.com,localhost
ALLOWED_HOSTS=*

# Disable API docs in production (set to true)
DISABLE_DOCS=false

# -----------------------------------------------------------------------------
# Docker Compose Settings
# -----------------------------------------------------------------------------
# Host port to expose the app on
HOST_PORT=8080

# Path for persistent data (SQLite database and logs)
DATA_PATH=stack_updater_data

# Container image to use
IMAGE=ghcr.io/w1nsid/stack-updater-app:latest
