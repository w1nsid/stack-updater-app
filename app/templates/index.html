<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Stack Updater Dashboard</title>
    <link rel="stylesheet" href="{{ static_url('style.css') }}" />
    <!-- Icons (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Modular JavaScript with ES6 modules -->
    <script type="module" src="{{ static_url('js/app.js') }}"></script>
</head>

<body>
    <header class="app-header">
        <div class="brand">
            <i data-lucide="boxes"></i>
            <span>Stack Updater</span>
        </div>
        <div class="header-actions">
            <button id="importBtn" class="header-btn">
                <span class="label">
                    <i data-lucide="download"></i>
                    <span>Import</span>
                </span>
            </button>
            <button id="refreshAllBtn" class="header-btn">
                <span class="label">
                    <i data-lucide="rotate-cw"></i>
                    <span>Refresh All</span>
                </span>
            </button>
            <button id="themeToggle" class="theme-switch" role="switch" aria-checked="false"
                aria-label="Toggle theme" title="Toggle theme">
                <span class="switch-track">
                    <span class="switch-icons">
                        <i data-lucide="moon" class="switch-icon switch-icon--moon"></i>
                        <i data-lucide="sun" class="switch-icon switch-icon--sun"></i>
                    </span>
                    <span class="switch-thumb" aria-hidden="true"></span>
                </span>
                <span class="sr-only">Toggle theme</span>
            </button>
        </div>
    </header>

    <div class="container">
        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon ok">
                    <i data-lucide="check-circle"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="statUpdated">0</div>
                    <div class="stat-label">Updated</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon warn">
                    <i data-lucide="alert-triangle"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="statOutdated">0</div>
                    <div class="stat-label">Outdated</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon error">
                    <i data-lucide="x-circle"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="statErrors">0</div>
                    <div class="stat-label">Errors</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon primary">
                    <i data-lucide="layers"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="statTotal">0</div>
                    <div class="stat-label">Total Stacks</div>
                </div>
            </div>
        </div>

        <!-- Main Dashboard Card -->
        <div class="card">
            <h1>Dashboard</h1>
            <div class="toolbar" style="display:flex;flex-wrap:wrap;gap:0.75rem;margin-bottom:1rem;align-items:center;">
                <label class="sr-only" for="filterSearch">Search stacks</label>
                <input id="filterSearch" type="text" placeholder="üîç Search by name..." aria-label="Search stacks"
                    style="flex:1;min-width:200px;" />
                <label class="sr-only" for="filterStatus">Filter status</label>
                <select id="filterStatus" aria-label="Filter by status">
                    <option value="all">All statuses</option>
                    <option value="ok">‚úÖ Updated</option>
                    <option value="warn">‚ö†Ô∏è Outdated</option>
                    <option value="error">‚ùå Error</option>
                    <option value="processing">‚è≥ Processing</option>
                    <option value="unknown">‚ùì Unknown</option>
                </select>
            </div>
            <div class="table-wrapper">
                <div class="table-shell">
                    <table aria-describedby="aria-live-region">
                        <thead>
                            <tr>
                                <th data-key="name" scope="col">Name</th>
                                <th data-key="image_status" scope="col">Image Status</th>
                                <th data-key="image_last_checked" scope="col">Last Checked</th>
                                <th data-key="last_updated_at" scope="col">Last Updated</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="stackTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
